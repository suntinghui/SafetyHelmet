<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>现场人员分布</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../css/oa.css" />

		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

		<style type="text/css">
			body,
			html,
			#allmap {
				width: 100%;
				height: 100%;
				overflow: hidden;
				margin: 0;
				font-family: "微软雅黑";
			}
			
			#l-map {
				height: 100%;
				width: 78%;
				float: left;
				border-right: 2px solid #bcbcbc;
			}
			
			#r-result {
				height: 100%;
				width: 20%;
				float: left;
			}
		</style>
		<style>
			.mui-card .mui-control-content {
				padding: 10px;
			}
			
			.mui-control-content {
				position: absolute;
				margin-top: 100px;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
			}
			
			.meeting-content {
				text-indent: 22px;
				font-size: 16px;
				color: #333333;
				margin: 15px;
			}
			
			.title {
				font-size: 17px;
				color: #333333;
				margin: 20px auto 10px 20px;
			}
			
			.content-title {
				font-size: 16px;
				color: #333333;
				margin-top: 10px;
			}
			
			.content-img {
				width: 50px;
				height: 50px;
			}
			
			.item-div {
				margin: 10px 20px 10px 10px;
				display: -webkit-box;
				-webkit-box-pack: center;
				-webkit-box-align: center;
			}
			
			.item-name {
				text-align: right;
				width: 30%;
				color: #666666;
				font-size: 16px;
			}
			
			.item-value {
				margin-left: 15px;
				width: 70%;
				color: #333333;
				font-size: 16px;
			}
			
			.redhat {
				color: #FF6666;
			}
			
			.greenhat {
				color: #009966;
			}
		</style>
	</head>

	<body style="background: #efeff4;">
		<header id="header" class="mui-bar mui-bar-nav navbar">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left backbtn" style="visibility: hidden;"></a>
			<h1 id="title" class="mui-title">现场分布</h1>
			<a class="mui-btn mui-btn-link mui-pull-right" id="helmetDetail">安全帽状态</a>
		</header>

		<div class="mui-content">
			<div style="padding: 10px 10px;">
				<div id="segmentedControl" class="mui-segmented-control mui-segmented-control-yao">
					<a class="mui-control-item mui-active" href="#item1">人员分布图</a>
					<a class="mui-control-item" href="#item2">人员分布表</a>
				</div>
			</div>

			<div>
				<!--人员分布图-->
				<div id="item1" class="mui-control-content mui-active mui-card">
					<div class="mui-scroll-wrapper scroll-content">

						<div class="mui-scroll left-content" id="allmap">
						</div>
					</div>
				</div>

				<!--人员分布表-->
				<div id="item2" class="mui-control-content mui-card">
					<div class="mui-scroll-wrapper scroll-content">
						<div class="mui-scroll">
							<ul class="mui-table-view" id="list">
								<li class="mui-table-view-cell">
									<a class="mui-navigate-right">
										<img src="../img/head.jpg" class="headImg" style="width: 45px; position: fixed; right: 20px;" />

										<div class="item-div">
											<div class="item-name">人员姓名</div>
											<div class="item-value">王志亮</div>
										</div>
										<div class="item-div">
											<div class="item-name">性别</div>
											<div class="item-value">男</div>
										</div>
										<div class="item-div">
											<div class="item-name">身份证号</div>
											<div class="item-value">371425198606217319</div>
										</div>
										<div class="item-div">
											<div class="item-name">所属单位</div>
											<div class="item-value">北京新世纪建筑有限公司</div>
										</div>
										<div class="item-div">
											<div class="item-name">佩戴状态</div>
											<div class="item-value redhat">未佩戴</div>
										</div>
									</a>
								</li>

								<li class="mui-table-view-cell">
									<a class="mui-navigate-right">
										<img src="../img/head.jpg" class="headImg" style="width: 45px; position: fixed; right: 20px;" />

										<div class="item-div">
											<div class="item-name">人员姓名</div>
											<div class="item-value">王志亮</div>
										</div>
										<div class="item-div">
											<div class="item-name">性别</div>
											<div class="item-value">男</div>
										</div>
										<div class="item-div">
											<div class="item-name">身份证号</div>
											<div class="item-value">371425198606217319</div>
										</div>
										<div class="item-div">
											<div class="item-name">所属单位</div>
											<div class="item-value">北京新世纪建筑有限公司</div>
										</div>
										<div class="item-div">
											<div class="item-name">佩戴状态</div>
											<div class="item-value greenhat">已佩戴</div>
										</div>
									</a>
								</li>

								<li class="mui-table-view-cell">
									<a class="mui-navigate-right">
										<img src="../img/head.jpg" class="headImg" style="width: 45px; position: fixed; right: 20px;" />

										<div class="item-div">
											<div class="item-name">人员姓名</div>
											<div class="item-value">王志亮</div>
										</div>
										<div class="item-div">
											<div class="item-name">性别</div>
											<div class="item-value">男</div>
										</div>
										<div class="item-div">
											<div class="item-name">身份证号</div>
											<div class="item-value">371425198606217319</div>
										</div>
										<div class="item-div">
											<div class="item-name">所属单位</div>
											<div class="item-value">北京新世纪建筑有限公司</div>
										</div>
										<div class="item-div">
											<div class="item-name">佩戴状态</div>
											<div class="item-value redhat">未佩戴</div>
										</div>
									</a>
								</li>

								<li class="mui-table-view-cell">
									<a class="mui-navigate-right">
										<img src="../img/head.jpg" class="headImg" style="width: 45px; position: fixed; right: 20px;" />

										<div class="item-div">
											<div class="item-name">人员姓名</div>
											<div class="item-value">王志亮</div>
										</div>
										<div class="item-div">
											<div class="item-name">性别</div>
											<div class="item-value">男</div>
										</div>
										<div class="item-div">
											<div class="item-name">身份证号</div>
											<div class="item-value">371425198606217319</div>
										</div>
										<div class="item-div">
											<div class="item-name">所属单位</div>
											<div class="item-value">北京新世纪建筑有限公司</div>
										</div>
										<div class="item-div">
											<div class="item-name">佩戴状态</div>
											<div class="item-value greenhat">已佩戴</div>
										</div>
									</a>
								</li>

							</ul>
						</div>
					</div>
				</div>

			</div>
		</div>

		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/constants.js"></script>
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=x1C7K385dRjOuugisRHZuAkyoU9Cnm06"></script>

		<script type="text/javascript">
			mui.init();
			mui('.mui-scroll-wrapper').scroll();
			mui('.scroll-content').scroll({
				indicators: true //是否显示滚动条
			});

			document.getElementById('helmetDetail').addEventListener('tap', function() {
				mui.openWindow({
					id: Math.random() + '',
					url: 'helmetDetail.html',
					preload: true,
					show: {
						aniShow: 'pop-in'
					},
				});
			}, false);

			mui('#list').on('tap', 'li', function(e) {
				if(menuState() == true) {
					mui.fire(mui.currentWebview.opener(), "menu:close");
					return;
				}

				mui.openWindow({
					id: Math.random() + '',
					url: 'persionDetail.html',
					preload: true,
					show: {
						aniShow: 'pop-in'
					},
				});
			});
		</script>

		<script>
			// 百度地图API功能
			var map = new BMap.Map("allmap");
			var point = new BMap.Point(116.312808, 39.987884);
			map.centerAndZoom(point, 15);
			// 编写自定义函数,创建标注
			function addMarker(point) {
				var marker = new BMap.Marker(point);
				map.addOverlay(marker);

				marker.addEventListener("click", attribute);
			}

			// 点击事件
			function attribute(e) {
				//var p = e.target.getPosition(); //获取marker的位置
				//alert("marker的位置是" + p.lng + "," + p.lat);

				if(menuState() == true) {
					mui.fire(mui.currentWebview.opener(), "menu:close");
					return;
				}

				mui.openWindow({
					id: Math.random() + '',
					url: 'persionDetail.html',
					preload: true,
					show: {
						aniShow: 'pop-in'
					},
				});
			}

			// 随机向地图添加12个标注
			var bounds = map.getBounds();
			var sw = bounds.getSouthWest();
			var ne = bounds.getNorthEast();
			var lngSpan = Math.abs(sw.lng - ne.lng);
			var latSpan = Math.abs(ne.lat - sw.lat);
			for(var i = 0; i < 12; i++) {
				var point = new BMap.Point(sw.lng + lngSpan * (Math.random() * 0.7), ne.lat - latSpan * (Math.random() * 0.7));
				addMarker(point);
			}
		</script>
	</body>

</html>
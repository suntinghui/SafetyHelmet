<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>历史轨迹信息</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css" />
		<script src="http://webapi.amap.com/maps?v=1.3&key=9568d6f792af393dba669f1bc146cf83"></script>
		<script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>

	</head>

	<body>
		<header id="header" class="mui-bar mui-bar-nav navbar">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left backbtn"></a>
			<h1 id="title" class="mui-title">历史轨迹信息</h1>
		</header>

		<div class="mui-content">
			<div id="container"></div>
		</div>

		<script src="../js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>

		<script>
			var marker, lineArr = [];

			var map = new AMap.Map("container", {
				resizeEnable: true,
				center: [116.306271, 39.981818],
				zoom: 17
			});

			marker = new AMap.Marker({
				map: map,
				position: [116.397428, 39.90923],
				icon: "http://webapi.amap.com/images/car.png",
				offset: new AMap.Pixel(-26, -13),
				autoRotation: true
			});
			var lngX = 116.397428,
				latY = 39.90923;
			lineArr.push([lngX, latY]);
			for(var i = 1; i < 4; i++) {
				lngX = lngX + Math.random() * 0.05;
				if(i % 2) {
					latY = latY + Math.random() * 0.0001;
				} else {
					latY = latY + Math.random() * 0.06;
				}
				lineArr.push([lngX, latY]);
			}

			// 绘制轨迹
			var polyline = new AMap.Polyline({
				map: map,
				path: lineArr,
				strokeColor: "#00A", //线颜色
				// strokeOpacity: 1,     //线透明度
				strokeWeight: 3, //线宽
				// strokeStyle: "solid"  //线样式
			});
			var passedPolyline = new AMap.Polyline({
				map: map,
				// path: lineArr,
				strokeColor: "#F00", //线颜色
				// strokeOpacity: 1,     //线透明度
				strokeWeight: 3, //线宽
				// strokeStyle: "solid"  //线样式
			});

			marker.on('moving', function(e) {
				passedPolyline.setPath(e.passedPath);
			})
			map.setFitView();

			marker.moveAlong(lineArr, 500);
		</script>
	</body>

</html>